# 部署后配置步骤

## ✅ 已完成
- [x] 边缘函数已部署

## 📋 接下来需要做的

### 步骤1：获取边缘函数URL

1. 在边缘函数控制台，找到您刚部署的函数
2. 查看函数详情页面
3. 找到 **访问地址** 或 **Function URL**
4. 复制这个URL，格式类似：`https://xxx-xxx.esa.aliyuncs.com`

### 步骤2：配置前端环境变量

1. 登录阿里云ESA Pages控制台
2. 进入您的前端站点设置
3. 找到 **环境变量** 或 **Environment Variables** 配置
4. 添加环境变量：
   ```
   变量名: VITE_API_BASE_URL
   变量值: https://your-edge-function-url.esa.aliyuncs.com
   ```
   （将 `your-edge-function-url` 替换为您刚才复制的实际URL）
5. 保存配置

### 步骤3：重新部署前端

1. 在ESA Pages控制台，找到您的前端站点
2. 点击 **重新部署** 或 **Redeploy**
3. 等待部署完成（系统会自动使用新的环境变量重新构建）

### 步骤4：测试功能

1. 访问前端应用URL
2. 上传一张药品图片
3. 点击"开始识别"
4. 查看识别结果

## 🔍 验证清单

- [ ] 已获取边缘函数URL
- [ ] 已在Pages中配置 `VITE_API_BASE_URL` 环境变量
- [ ] 已重新部署前端应用
- [ ] 已测试识别功能
- [ ] 已测试多图上传
- [ ] 已测试历史记录（如果存储已实现）

## ⚠️ 如果遇到问题

### 问题1：仍然404错误
- 检查环境变量是否正确配置
- 确认边缘函数URL是否正确
- 检查是否已重新部署前端

### 问题2：CORS错误
- 边缘函数代码已配置允许所有来源
- 如果仍有问题，检查边缘函数日志

### 问题3：识别失败
- 检查边缘函数环境变量是否正确配置（特别是API Key）
- 查看边缘函数日志
- 检查豆包API是否正常

## 📝 更新README

部署完成后，记得更新README.md中的：
- 在线演示URL（前端访问地址）
- 边缘函数URL（如果需要）

